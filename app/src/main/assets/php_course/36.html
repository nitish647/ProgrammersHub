<!DOCTYPE html>
<!-- saved from url=(0055)https://www.tutorialspoint.com/sql/sql-update-query.htm -->
<html style="" class=" js no-touch csstransforms3d csstransitions"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- Basic -->

    <title>PHP - Facebook Login</title>
    <meta name="description" content="PHP Environment Setup - A simple and short PHP tutorial and complete reference manual for all built-in PHP functions. This tutorial is designed for beginners to advanced developers. You will learn PHP Built-in Function, Predefined Variables Examples, Object Oriented PHP, Numbers, Scalars, Arrays, Hash File I/O, IF, ELSEIF, Do, While Loops, Operators, Regular Expressions, GET, POST, Subroutines, Coding Standard, Modules, File Management, Socket Communication, Reference, Special Variables, Syntax Overview, Form Validation, Advanced PHP, Library, Web Design, PayPal Integration, MySQL Login, Ajax Search, Ajax XML Parser, Ajax Auto Complete Search, Ajax RSS Feed Example, XML Introduction, Simple XML, Simple XML GET, SAX Parser Example, DOM Parser Example, Frame Works, Core php vs frame works php, Design Patterns.">
    <meta name="keywords" content="Learning, PHP, Programming, Language, Built-in Function, Library, Web Design, Object Oriented PHP, PHP Variables, Scalars, Arrays, Hash, File I/O, Looping, Regular Expressions, Subroutines, Coding Standard, Writing Modules, File Management, Socket, Examples, Reference, Special Variables, Syntax Overview, Advanced PHP, Tutorial, Tutorials, Operators, GET, POST, Predefined, Form Validation, PayPal Integration, MySQL Login, Ajax Search, Ajax XML Parser, Ajax Auto Complete Search, Ajax RSS Feed Example, XML Introduction, Simple XML, Simple XML GET, SAX Parser Example, DOM Parser Example, Frame Works, Core php vs frame works php, Design Patterns.">

    <meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">


<link rel="stylesheet" href="./17_files/style-min.css">








</head>
<body style="">


<div style="clear:both;"></div>
<div role="main" class="main">
<div class="container">
<div class="row">

<!-- PRINTING STARTS HERE -->
<div class="row">
<div class="content">
    <div class="col-md-7 middle-col">
        <h1>PHP - Facebook Login</h1>

        <div class="clearer"></div>
        <hr>
        <p>We can use Facebook login to allow the users to get access into the websites. This page will explain you about login with facebook PHP SDK.</p>
        <h2>Login With Facebook</h2>
        <ul class="list">
            <li><p>Need to go <a rel="nofollow" target="_blank" href="https://developers.facebook.com/apps/">https://developers.facebook.com/apps/</a> and click on add a new group button to make the app ID.</p></li>
            <li><p>Choose Website</p></li>
            <li><p>Give an app name and click on Create New Facebook App ID</p></li>
            <li><p>Click on Create app ID</p></li>
            <li><p>Click on Skip Quick Test</p></li>
        </ul>
        <p>On Final stage, it will show as below shown image.</p>
        <img src="../img/21.PNG" alt="facebook">
        <h2>fbconfig.php file overview</h2>
        <ul class="list">
            <li><p>Now download zip from <a href="https://www.tutorialspoint.com/php/facebook.zip">here</a></p></li>
            <li><p>Now open fbconfig.php file and add you app ID and app Secrete</p></li>
        </ul>
        <pre class="prettyprint notranslate prettyprinted" style=""><span class="typ">FacebookSession</span><span class="pun">::</span><span class="pln">setDefaultApplication</span><span class="pun">(</span><span class="pln"> </span><span class="str">'your app ID'</span><span class="pun">,</span><span class="str">'App Secrete '</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
</span><span class="com">// login helper with redirect_uri</span><span class="pln">
   $helper </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">FacebookRedirectLoginHelper</span><span class="pun">(</span><span class="str">'You web address'</span><span class="pln"> </span><span class="pun">);</span></pre>
        <p>Finally fbconfig.php file as shown below âˆ’</p>
        <pre class="prettyprint notranslate prettyprinted" style=""><span class="pun">&lt;?</span><span class="pln">php

   session_start</span><span class="pun">();</span><span class="pln">

   </span><span class="com">// added in v4.0.0</span><span class="pln">
   require_once </span><span class="str">'autoload.php'</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">use</span><span class="pln"> </span><span class="typ">Facebook</span><span class="pln">\FacebookSession</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">use</span><span class="pln"> </span><span class="typ">Facebook</span><span class="pln">\FacebookRedirectLoginHelper</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">use</span><span class="pln"> </span><span class="typ">Facebook</span><span class="pln">\FacebookRequest</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">use</span><span class="pln"> </span><span class="typ">Facebook</span><span class="pln">\FacebookResponse</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">use</span><span class="pln"> </span><span class="typ">Facebook</span><span class="pln">\FacebookSDKException</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">use</span><span class="pln"> </span><span class="typ">Facebook</span><span class="pln">\FacebookRequestException</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">use</span><span class="pln"> </span><span class="typ">Facebook</span><span class="pln">\FacebookAuthorizationException</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">use</span><span class="pln"> </span><span class="typ">Facebook</span><span class="pln">\GraphObject</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">use</span><span class="pln"> </span><span class="typ">Facebook</span><span class="pln">\Entities\AccessToken</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">use</span><span class="pln"> </span><span class="typ">Facebook</span><span class="pln">\HttpClients\FacebookCurlHttpClient</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">use</span><span class="pln"> </span><span class="typ">Facebook</span><span class="pln">\HttpClients\FacebookHttpable</span><span class="pun">;</span><span class="pln">

   </span><span class="com">// init app with app id and secret</span><span class="pln">
   </span><span class="typ">FacebookSession</span><span class="pun">::</span><span class="pln">setDefaultApplication</span><span class="pun">(</span><span class="pln"> </span><span class="str">'496544657159182'</span><span class="pun">,</span><span class="str">'e6d239655aeb3e496e52fabeaf1b1f93'</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

   </span><span class="com">// login helper with redirect_uri</span><span class="pln">
   $helper </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">FacebookRedirectLoginHelper</span><span class="pun">(</span><span class="str">'http://www.tutorialspoint.com/'</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

   </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      $session </span><span class="pun">=</span><span class="pln"> $helper</span><span class="pun">-&gt;</span><span class="pln">getSessionFromRedirect</span><span class="pun">();</span><span class="pln">
   </span><span class="pun">}</span><span class="kwd">catch</span><span class="pun">(</span><span class="pln"> </span><span class="typ">FacebookRequestException</span><span class="pln"> $ex </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="com">// When Facebook returns an error</span><span class="pln">
   </span><span class="pun">}</span><span class="kwd">catch</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Exception</span><span class="pln"> $ex </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="com">// When validation fails or other local issues</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">

   </span><span class="com">// see if we have a session</span><span class="pln">
   </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> isset</span><span class="pun">(</span><span class="pln"> $session </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="com">// graph api request for user data</span><span class="pln">
      $request </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">FacebookRequest</span><span class="pun">(</span><span class="pln"> $session</span><span class="pun">,</span><span class="pln"> </span><span class="str">'GET'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'/me'</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
      $response </span><span class="pun">=</span><span class="pln"> $request</span><span class="pun">-&gt;</span><span class="pln">execute</span><span class="pun">();</span><span class="pln">

      </span><span class="com">// get response</span><span class="pln">
      $graphObject </span><span class="pun">=</span><span class="pln"> $response</span><span class="pun">-&gt;</span><span class="pln">getGraphObject</span><span class="pun">();</span><span class="pln">
      $fbid </span><span class="pun">=</span><span class="pln"> $graphObject</span><span class="pun">-&gt;</span><span class="pln">getProperty</span><span class="pun">(</span><span class="str">'id'</span><span class="pun">);</span><span class="pln">           </span><span class="com">// To Get Facebook ID</span><span class="pln">
      $fbfullname </span><span class="pun">=</span><span class="pln"> $graphObject</span><span class="pun">-&gt;</span><span class="pln">getProperty</span><span class="pun">(</span><span class="str">'name'</span><span class="pun">);</span><span class="pln">   </span><span class="com">// To Get Facebook full name</span><span class="pln">
      $femail </span><span class="pun">=</span><span class="pln"> $graphObject</span><span class="pun">-&gt;</span><span class="pln">getProperty</span><span class="pun">(</span><span class="str">'email'</span><span class="pun">);</span><span class="pln">      </span><span class="com">// To Get Facebook email ID</span><span class="pln">

      </span><span class="com">/* ---- Session Variables -----*/</span><span class="pln">
      $_SESSION</span><span class="pun">[</span><span class="str">'FBID'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> $fbid</span><span class="pun">;</span><span class="pln">
      $_SESSION</span><span class="pun">[</span><span class="str">'FULLNAME'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> $fbfullname</span><span class="pun">;</span><span class="pln">
      $_SESSION</span><span class="pun">[</span><span class="str">'EMAIL'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln">  $femail</span><span class="pun">;</span><span class="pln">

      </span><span class="com">/* ---- header location after session ----*/</span><span class="pln">
      header</span><span class="pun">(</span><span class="str">"Location: index.php"</span><span class="pun">);</span><span class="pln">
   </span><span class="pun">}</span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      $loginUrl </span><span class="pun">=</span><span class="pln"> $helper</span><span class="pun">-&gt;</span><span class="pln">getLoginUrl</span><span class="pun">();</span><span class="pln">
      header</span><span class="pun">(</span><span class="str">"Location: "</span><span class="pun">.</span><span class="pln">$loginUrl</span><span class="pun">);</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
</span><span class="pun">?&gt;</span></pre>
        <h2>Login page Overview</h2>
        <p>Login page is used to login into FB</p>
        <pre class="prettyprint notranslate prettyprinted" style=""><span class="pun">&lt;?</span><span class="pln">php
   session_start</span><span class="pun">();</span><span class="pln">
   session_unset</span><span class="pun">();</span><span class="pln">

   $_SESSION</span><span class="pun">[</span><span class="str">'FBID'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span><span class="pln">
   $_SESSION</span><span class="pun">[</span><span class="str">'FULLNAME'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span><span class="pln">
   $_SESSION</span><span class="pun">[</span><span class="str">'EMAIL'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln">  NULL</span><span class="pun">;</span><span class="pln">
   header</span><span class="pun">(</span><span class="str">"Location: index.php"</span><span class="pun">);</span><span class="pln">
</span><span class="pun">?&gt;</span></pre>
        <h2>Index.php</h2>
        <p>Index page is as shown below.</p>
        <pre class="prettyprint notranslate prettyprinted" style=""><span class="pun">&lt;?</span><span class="pln">php
   session_start</span><span class="pun">();</span><span class="pln">
</span><span class="pun">?&gt;</span><span class="pln">
</span><span class="tag">&lt;html</span><span class="pln"> </span><span class="atn">xmlns:fb</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"http://www.facebook.com/2008/fbml"</span><span class="tag">&gt;</span><span class="pln">

   </span><span class="tag">&lt;head&gt;</span><span class="pln">
      </span><span class="tag">&lt;title&gt;</span><span class="pln">Login with Facebook</span><span class="tag">&lt;/title&gt;</span><span class="pln">
      </span><span class="tag">&lt;link</span><span class="pln">
         </span><span class="atn">href</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"http://www.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css"</span><span class="pln">
         </span><span class="atn">rel</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"stylesheet"</span><span class="tag">&gt;</span><span class="pln">
   </span><span class="tag">&lt;/head&gt;</span><span class="pln">

   </span><span class="tag">&lt;body&gt;</span><span class="pln">
      </span><span class="pun">&lt;?</span><span class="pln">php </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">$_SESSION</span><span class="pun">[</span><span class="str">'FBID'</span><span class="pun">]):</span><span class="pln"> </span><span class="pun">?&gt;</span><span class="pln">      </span><span class="com">&lt;!--  After user login  --&gt;</span><span class="pln">

         </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">class</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"container"</span><span class="tag">&gt;</span><span class="pln">

            </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">class</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"hero-unit"</span><span class="tag">&gt;</span><span class="pln">
               </span><span class="tag">&lt;h1&gt;</span><span class="pln">Hello </span><span class="pun">&lt;?</span><span class="pln">php echo $_SESSION</span><span class="pun">[</span><span class="str">'USERNAME'</span><span class="pun">];</span><span class="pln"> </span><span class="pun">?&gt;</span><span class="tag">&lt;/h1&gt;</span><span class="pln">
               </span><span class="tag">&lt;p&gt;</span><span class="pln">Welcome to "facebook login" tutorial</span><span class="tag">&lt;/p&gt;</span><span class="pln">
            </span><span class="tag">&lt;/div&gt;</span><span class="pln">

            </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">class</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"span4"</span><span class="tag">&gt;</span><span class="pln">

               </span><span class="tag">&lt;ul</span><span class="pln"> </span><span class="atn">class</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"nav nav-list"</span><span class="tag">&gt;</span><span class="pln">
                  </span><span class="tag">&lt;li</span><span class="pln"> </span><span class="atn">class</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"nav-header"</span><span class="tag">&gt;</span><span class="pln">Image</span><span class="tag">&lt;/li&gt;</span><span class="pln">

                  </span><span class="tag">&lt;li&gt;</span><span class="pln">&lt;img src = "https://graph.facebook.com/</span><span class="pun">&lt;?</span><span class="pln">php
                     echo $_SESSION</span><span class="pun">[</span><span class="str">'FBID'</span><span class="pun">];</span><span class="pln"> </span><span class="pun">?&gt;</span><span class="pln">/picture"&gt;</span><span class="tag">&lt;/li&gt;</span><span class="pln">

                  </span><span class="tag">&lt;li</span><span class="pln"> </span><span class="atn">class</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"nav-header"</span><span class="tag">&gt;</span><span class="pln">Facebook ID</span><span class="tag">&lt;/li&gt;</span><span class="pln">
                  </span><span class="tag">&lt;li&gt;</span><span class="pun">&lt;?</span><span class="pln">php echo  $_SESSION</span><span class="pun">[</span><span class="str">'FBID'</span><span class="pun">];</span><span class="pln"> </span><span class="pun">?&gt;</span><span class="tag">&lt;/li&gt;</span><span class="pln">

                  </span><span class="tag">&lt;li</span><span class="pln"> </span><span class="atn">class</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"nav-header"</span><span class="tag">&gt;</span><span class="pln">Facebook fullname</span><span class="tag">&lt;/li&gt;</span><span class="pln">

                  </span><span class="tag">&lt;li&gt;</span><span class="pun">&lt;?</span><span class="pln">php echo $_SESSION</span><span class="pun">[</span><span class="str">'FULLNAME'</span><span class="pun">];</span><span class="pln"> </span><span class="pun">?&gt;</span><span class="tag">&lt;/li&gt;</span><span class="pln">

                  </span><span class="tag">&lt;li</span><span class="pln"> </span><span class="atn">class</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"nav-header"</span><span class="tag">&gt;</span><span class="pln">Facebook Email</span><span class="tag">&lt;/li&gt;</span><span class="pln">

                  </span><span class="tag">&lt;li&gt;</span><span class="pun">&lt;?</span><span class="pln">php echo $_SESSION</span><span class="pun">[</span><span class="str">'EMAIL'</span><span class="pun">];</span><span class="pln"> </span><span class="pun">?&gt;</span><span class="tag">&lt;/li&gt;</span><span class="pln">

                  </span><span class="tag">&lt;div&gt;&lt;a</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"logout.php"</span><span class="tag">&gt;</span><span class="pln">Logout</span><span class="tag">&lt;/a&gt;&lt;/div&gt;</span><span class="pln">

               </span><span class="tag">&lt;/ul&gt;</span><span class="pln">

            </span><span class="tag">&lt;/div&gt;</span><span class="pln">
         </span><span class="tag">&lt;/div&gt;</span><span class="pln">

         </span><span class="pun">&lt;?</span><span class="pln">php </span><span class="kwd">else</span><span class="pun">:</span><span class="pln"> </span><span class="pun">?&gt;</span><span class="pln">     </span><span class="com">&lt;!-- Before login --&gt;</span><span class="pln">

         </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">class</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"container"</span><span class="tag">&gt;</span><span class="pln">
            </span><span class="tag">&lt;h1&gt;</span><span class="pln">Login with Facebook</span><span class="tag">&lt;/h1&gt;</span><span class="pln">
            Not Connected

            </span><span class="tag">&lt;div&gt;</span><span class="pln">
               </span><span class="tag">&lt;a</span><span class="pln"> </span><span class="atn">href</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"fbconfig.php"</span><span class="tag">&gt;</span><span class="pln">Login with Facebook</span><span class="tag">&lt;/a&gt;</span><span class="pln">
            </span><span class="tag">&lt;/div&gt;</span><span class="pln">

            </span><span class="tag">&lt;div&gt;</span><span class="pln">
               </span><span class="tag">&lt;a</span><span class="pln"> </span><span class="atn">href</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"http://www.tutorialspoint.com"</span><span class="pln">
                  </span><span class="atn">title</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"Login with facebook"</span><span class="tag">&gt;</span><span class="pln">More information about Tutorialspoint</span><span class="tag">&lt;/a&gt;</span><span class="pln">
            </span><span class="tag">&lt;/div&gt;</span><span class="pln">
         </span><span class="tag">&lt;/div&gt;</span><span class="pln">

      </span><span class="pun">&lt;?</span><span class="pln">php endif </span><span class="pun">?&gt;</span><span class="pln">

   </span><span class="tag">&lt;/body&gt;</span><span class="pln">
</span><span class="tag">&lt;/html&gt;</span></pre>
        <p>It will produce the result. Before trying this example, please logout your face book account in your browser.</p>
        <img src="../img/22.PNG" alt="Facebook Login">
        <h2>Logout Facebook</h2>
        <p>Below code is used to logout facebook.</p>
        <pre class="prettyprint notranslate prettyprinted" style=""><span class="pun">&lt;?</span><span class="pln">php
   session_start</span><span class="pun">();.</span><span class="pln">
   session_unset</span><span class="pun">();</span><span class="pln">

   $_SESSION</span><span class="pun">[</span><span class="str">'FBID'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span><span class="pln">
   $_SESSION</span><span class="pun">[</span><span class="str">'FULLNAME'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span><span class="pln">
   $_SESSION</span><span class="pun">[</span><span class="str">'EMAIL'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln">  NULL</span><span class="pun">;</span><span class="pln">
   header</span><span class="pun">(</span><span class="str">"Location: index.php"</span><span class="pun">);</span><span class="pln">
</span><span class="pun">?&gt;</span></pre>
        <hr>
    </div></div></div></div></div></div>
</body></html>